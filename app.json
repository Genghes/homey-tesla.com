{
  "id":"com.tesla",
  "version":"0.0.1",
  "compatibility":">=0.9.3",
  "name":{
    "en":"Tesla",
    "nl":"Tesla"
  },
  "description":{
    "en":"Control your Tesla Model S and Model X",
    "nl":"Bedien je Tesla Model S en Model X"
  },
  "author":{
    "name":"Erik van Dongen",
    "website":"http://github.com/irritanterik/"
  },
  "images":{
    "large":"./assets/images/large.jpg",
    "small":"./assets/images/small.jpg"
  },
  "category":"tools",
  "permissions":[
    "homey:manager:geolocation",
    "homey:manager:speech-input",
    "homey:manager:speech-output"
  ],
  "capabilities":{
    "location": {
      "type": "string",
      "title": {
        "en": "Location",
        "nl": "Positie"
      },
      "units": {
        "en": "Lat Lng"
      },
      "desc": {
        "en": "Location of tracker"
      },
      "getable": true,
      "setable": false
    },
    "moving": {
      "type": "boolean",
      "title": {
        "en": "Moving",
        "nl": "Onderweg"
      },
      "desc": {
        "en": "Is tracker moving",
        "nl": "Is tracker onderweg"
      },
      "getable": true,
      "setable": false
    }
  },
  "drivers":[
    {
      "id":"models",
      "name":{
        "en":"Model S",
        "nl":"Model S"
      },
      "images":{
        "large":"drivers/models/assets/images/large.jpg",
        "small":"drivers/models/assets/images/small.jpg"
      },
      "class":"other",
      "capabilities":["location", "moving"],
      "settings":[
        {
          "type":"group",
          "label":{
            "en":"General settings",
            "nl":"Instellingen"
          },
          "children":[
            {
              "id":"retriggerRestrictTime",
              "type":"number",
              "label":{
                "en":"Minimum time between movement triggers (seconds)",
                "nl":"Minimumtijd tussen beweging triggers (seconden)"
              },
              "value": 1,
              "attr":{
                "min": 0,
                "max": 86400
              }
            },
            {
              "id":"retriggerRestrictDistance",
              "type":"number",
              "label":{
                "en":"Minimum distance travelled between movement triggers (meters)",
                "nl":"Minimaal afgelegde afstand tussen triggers (meter)"
              },
              "value": 1,
              "attr":{
                "min": 0,
                "max": 40075000
              }
            },
            {
              "id":"stoppedMovingTimeout",
              "type":"number",
              "label":{
                "en":"Minimum time between last new location and trigger 'stops moving' (seconds)",
                "nl":"Minimumtijd tussen laatst ontvangen locatie en trigger 'einde beweging' (seconden)"
              },
              "value": 120,
              "attr":{
                "min": 30,
                "max": 86400
              }
            }
          ]
        }
      ],
      "pair":[
        {
          "id":"start"
        },
        {
          "id":"list_devices",
          "template":"list_devices",
          "navigation":{
            "next":"add_vehicle"
          }
        },
        {
          "id":"add_vehicle",
          "template":"add_devices"
        }
      ]
    }
  ],
  "flow": {
    "conditions": [
      { "id":"autoConditioningState",
        "title":{
           "en":"Airco is !{{on|off}}",
           "nl":"Airco is !{{aan|uit}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"driverTempSettingValue",
        "title":{
           "en":"Airco setpoint is !{{|not}} above (℃)",
           "nl":"Airco instelling is !{{|niet}} boven (℃)"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "temperature",
            "type": "number"
          }
        ]
      },
      { "id":"magicApiConditions",
        "title":{
           "en":"Api condition !{{|inversed}}",
           "nl":"Api conditie !{{|omgekeerd}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "apiValue",
            "type": "autocomplete"
          },{
            "name": "conditionType",
            "type": "autocomplete"
          },{
            "name": "conditionValue",
            "type": "text"
          }
        ]
      },
      { "id":"panoroofState",
        "title":{
           "en":"Panoroof is !{{open|closed}}",
           "nl":"Panoramadak is !{{open|dicht}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"vehicleMoving",
        "title":{
           "en":"!{{Driving|Not driving}}",
           "nl":"Rijdt !{{|niet}}"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      }
    ],
    "actions": [
      { "id":"autoconditioningControl",
        "title":{
           "en":"Airco",
           "nl":"Airco"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "autoconditioningstate",
            "type": "dropdown",
            "values": [
              {
                "id": "OFF",
                "label": {
                  "en": "Off", "nl": "Uit"
                }
              },{
                "id": "ON",
                "label": {
                  "en": "On", "nl": "Aan"
                }
              }
            ]
          }
        ]
      },
      { "id":"autoconditioningTemperature",
        "title":{
           "en":"Temperature setpoint",
           "nl":"Temperatuur instellen"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "temp",
            "type": "range",
            "min": 17,
            "max": 31,
            "step": 0.5,
            "label": "℃",
            "labelDecimals": 1
          }
        ]
      },
      { "id":"chargeControl",
        "title":{
           "en":"Charging",
           "nl":"Opladen"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "chargestate",
            "type": "dropdown",
            "values": [
              {
                "id": "OFF",
                "label": {
                  "en": "Off", "nl": "Uit"
                }
              },{
                "id": "ON",
                "label": {
                  "en": "On", "nl": "Aan"
                }
              }
            ]
          }
        ]
      },
      { "id":"doorLockControl",
        "title":{
           "en":"Doors",
           "nl":"Deuren"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "lock",
            "type": "dropdown",
            "values": [
              {
                "id": "LOCK",
                "label": {
                  "en": "Lock", "nl": "Vergrendelen"
                }
              },{
                "id": "OPEN",
                "label": {
                  "en": "Unlock", "nl": "Openen"
                }
              }
            ]
          }
        ]
      },
      { "id":"flashLights",
        "title":{
           "en":"Flash lights",
           "nl":"Knipper koplampen"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"honk",
        "title":{
           "en":"Honk horn",
           "nl":"Claxonneer"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"openChargePort",
        "title":{
           "en":"Open charge port",
           "nl":"Openen oplaadpunt"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"panoroofControl",
        "title":{
           "en":"Panoroof setting",
           "nl":"Panoramadak instelling"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "panoroofstate",
            "type": "dropdown",
            "values": [
              {
                "id": "open",
                "label": {
                  "en": "Open", "nl": "Openen"
                }
              },{
                "id": "close",
                "label": {
                  "en": "Close", "nl": "Sluiten"
                }
              },{
                "id": "comfort",
                "label": {
                  "en": "Comfort", "nl": "Comfort"
                }
              },{
                "id": "vent",
                "label": {
                  "en": "Vent", "nl": "Ventileren"
                }
              }
            ]
          }
        ]
      },
      { "id":"remoteStartDrive",
        "title":{
           "en":"Remote start",
           "nl":"Starten"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"resetValetPin",
        "title":{
           "en":"Reset valet PIN",
           "nl":"Reset valet PIN"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      },
      { "id":"setChargeMode",
        "title":{
           "en":"Set charge limit mode",
           "nl":"Instellen oplaad modus"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "chargemode",
            "type": "dropdown",
            "values": [
              {
                "id": "standard",
                "label": {
                  "en": "Standard", "nl": "Standaard"
                }
              },{
                "id": "max_range",
                "label": {
                  "en": "Max range", "nl": "Maximaal bereik"
                }
              }
            ]
          }
        ]
      },
      { "id":"setChargeLimit",
        "title":{
           "en":"Set charge limit %",
           "nl":"Instellen oplaad limiet %"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "limit",
            "type": "range",
            "min": 10,
            "max": 100,
            "step": 1,
            "label": "%",
            "labelDecimals": 0
          }
        ]
      },
      { "id":"setValetMode",
        "title":{
           "en":"Valet mode",
           "nl":"Valet modus"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "valetstate",
            "type": "dropdown",
            "values": [
              {
                "id": "OFF",
                "label": {
                  "en": "Off", "nl": "Uit"
                }
              },{
                "id": "ON",
                "label": {
                  "en": "On", "nl": "Aan"
                }
              }
            ]
          }
        ]
      },
      { "id":"setValetPin",
        "title":{
           "en":"Activate valet mode with PIN",
           "nl":"Valet modus activeren met PIN"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          },{
            "name": "pin",
            "type": "text",
            "label": {
              "en": "Off", "nl": "Uit"
            },
            "placeholder": {
              "en": "0000"
            }
          }
        ]
      },
      { "id":"wakeUp",
        "title":{
           "en":"Wake up from sleep state",
           "nl":"Wekken uit slaapstand"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter":"driver_id=models"
          }
        ]
      }
    ]
  }
}
